# git使用

由于学了忘了，忘了学，所以打算好好总结一下，代码很重要，担心把项目弄出问题所以必须好好学习总结一下。

参考<a href="https://www.runoob.com/git/git-tutorial.html">菜鸟教程</a>、<a href="https://www.liaoxuefeng.com/wiki/896043488029600">廖雪峰git教程</a>

创建版本库 git init

## Git 工作区、暂存区和版本库（提交过程）

首先我们先搞清楚这个存储空间的概念

**工作区：** 就是你在电脑里能看到的目录。就是你可以不经过git直接操作修改的                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       

![image-20201126224141671](image/image-20201126224141671.png)

**暂存区：**英文叫 stage 或 index。一般存放在  .git 目录下的 index 文件（.git/index）中，所以我们把暂存区有时也叫作索引（index）。

一般提交到版本库之前从工作区复制一份放到先放到这里。

<img src="image/image-20201126224510357.png" alt="image-20201126224510357" style="zoom:80%;" />



**本地版本库:**   工作区有一个隐藏目录 .git，这个不算工作区，而是 Git 的版本库。也就是分支上哪些内容。

版本库上的分支与工作区间可以想象成两套文件，git实现的效果反正是这样，至于怎么样实现的咱们就不必关心。



![img](image/1352126739_7909.jpg)





图中我们可以看出此时 "HEAD" 实际是指向 master 分支的一个"游标"。所以图示的命令中出现 HEAD 的地方可以用 master 来替换。

我们用命令现在模拟一下，这文件在这几个空间传递。

现在我只是修改工作区间内容，未加到暂存区间上，也没有提交到本地仓库，看一下是什么状态（git status）

![image-20201126225330653](image/image-20201126225330653.png)



本地与工作空间的对比：git.md发生了更改，也未提交到缓存区  2.未跟踪的文件说明版本库没有这个文件的信息，也就是新增。

然后我们在执行 git add . 把发生改变加到暂存区。然后再查一下拆状态。



![image-20201126225932379](image/image-20201126225932379.png)





这是加到暂存区的文件后查看状态情况。（之所以多了一个文件，是我上面写文档的时候又添加了一个图片）

changes to be commited----------顾名思义将要提交的改变，这就是加到暂存区后 git的状态。

下面我们看一下提交之后的状态。见下图。

![image-20201126232857456](image/image-20201126232857456.png)



## 撤销修改

```bash
git checkout -- file
```

两种不同情况下这个命令，会发生不同的操作

​			一种是`file`修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；

​			另一种是`file`已经添加到暂存区后，又对工作区间对应的文件做出了修改，现在，撤销修改就回到添加到暂存区后修改文件前的状态，也就是说就丢失了加到暂存区后工作区间文件的修改（很危险的）。（**一句话就是：会用暂存区全部或指定的文件替换工作区的文件**）

（也就是暂存区的文件与工作区间对应的文件一致）





```bash
git reset HEAD <file>
```

在暂存区有文件时，使用此命令就会把暂存区的文件修改回退到工作区，就相当于恢复到add到暂存区**之前**的状态

![image-20201127000303349](image/image-20201127000303349.png)





```shell
git rm --cached <file>
```

直接删除暂存区的文件，工作区间不会做任何修改，就和加暂存区的状态一样。下边我们用命令来演示一下。

![image-20201127220227820](image/image-20201127220227820.png)





```shell
git checkout HEAD <file>
```

下面几个图是我演示的



修改文件：

![image-20201127223201528](image/image-20201127223201528.png)恢复到与版本库一致（命令展示）：

![image-20201127222933969](image/image-20201127222933969.png)

展示效果：

![image-20201127225833452](image/image-20201127225833452.png)



## 版本回退

实践的过程中理解更深，下面三句话 我每写一句，就会提交到本地。





